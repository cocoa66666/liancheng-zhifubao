{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/charging-lcyj-zhifubao/wxlclc/Charging_pile_zfb/pages/navi/navi.vue?3548","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/charging-lcyj-zhifubao/wxlclc/Charging_pile_zfb/pages/navi/navi.vue?868e","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/charging-lcyj-zhifubao/wxlclc/Charging_pile_zfb/pages/navi/navi.vue?9f89","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/charging-lcyj-zhifubao/wxlclc/Charging_pile_zfb/pages/navi/navi.vue?8a60","uni-app:///pages/navi/navi.vue","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/charging-lcyj-zhifubao/wxlclc/Charging_pile_zfb/pages/navi/navi.vue?d9cb","webpack:///C:/Users/ASUS/Documents/HBuilderProjects/charging-lcyj-zhifubao/wxlclc/Charging_pile_zfb/pages/navi/navi.vue?f626"],"names":["createPage","Page"],"mappings":"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","file":"pages/navi/navi.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/navi/navi.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./navi.vue?vue&type=template&id=ed1da674&\"\nvar renderjs\nimport script from \"./navi.vue?vue&type=script&lang=js&\"\nexport * from \"./navi.vue?vue&type=script&lang=js&\"\nimport style0 from \"./navi.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/navi/navi.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./navi.vue?vue&type=template&id=ed1da674&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./navi.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./navi.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<map id=\"myMap\" :longitude=\"longitudeFinal\" :latitude=\"latitudeFinal\" :include-points=\"makers\" :circles=\"circles\"\r\n\t\t :markers=\"markers\" :polyline=\"polyline\" :scale=\"scale\" show-location>\r\n\t\t</map>\r\n\t\t<view class=\"naviDetail\">\r\n\t\t\t<view class=\"naviDetail_title\">\r\n\t\t\t\t三峡电能二七桥充电站\r\n\t\t\t</view>\r\n\t\t\t<view class=\"naviDetail_word\">\r\n\t\t\t\t湖北省武汉市江岸区解放大道2538号\r\n\t\t\t</view>\r\n\t\t\t<image class=\"naviDetail_img\" src=\"../../static/img/daozheli_icon3x.png\" @tap=\"pathPlanning\"></image>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport utlis from '../../static/js/utlis.js';\r\n\t// 引入SDK核心类\r\n\timport QQMapWX from '../../static/js/qqmap-wx-jssdk.js';\r\n\tvar qqmapsdk = new QQMapWX({\r\n\t\tkey: utlis.key // 必填\r\n\t});\r\n\tvar EARTH_RADIUS = 6378136.49;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmarkers: [], //标点\r\n\t\t\t\tlatitude: '', //目的地纬度\r\n\t\t\t\tlongitude: '', //目的地经度 \r\n\t\t\t\tlatitudeFinal: '', //目的地纬度\r\n\t\t\t\tlongitudeFinal: '', //目的地经度 \r\n\t\t\t\tpolyline: [], //路线\r\n\t\t\t\tscale: 15, //缩放级别\r\n\t\t\t\tagencyList: [],\r\n\t\t\t\tlatFrom: '',\r\n\t\t\t\tlngFrom: '',\r\n\t\t\t\tlatTo: '',\r\n\t\t\t\tlngTo: '',\r\n\t\t\t\tcircles: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\r\n\t\t},\r\n\t\tonShow(e) {\r\n\t\t\tlet self = this\r\n\t\t\tself.pathPlanning(e)\r\n\t\t\tself.openMap(e)\r\n\t\t\t// uni.getLocation({\r\n\t\t\t// \ttype: 'gcj02',\r\n\t\t\t// \tsuccess: function(res) {\r\n\t\t\t// \t\tlet marker = self.createMarker(res);\r\n\t\t\t// \t\tself.markers = marker\r\n\t\t\t// \t\tself.latFrom = res.latitude;\r\n\t\t\t// \t\tself.lngFrom = res.longitude;\r\n\t\t\t// \t\tself.latitude = res.latitude\r\n\t\t\t// \t\tself.longitude = res.longitude\r\n\t\t\t// \t\tself.latitudeFinal = self.markers[0].latitude\r\n\t\t\t// \t\tself.longitudeFinal = self.markers[0].longitude\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: function(res) {\r\n\t\t\t// \t\tconsole.log(res.errMsg)\r\n\t\t\t// \t\tif (res.errMsg == 'getLocation:fail auth deny') {\r\n\t\t\t// \t\t\tuni.navigateTo({\r\n\t\t\t// \t\t\t\turl: '/pages/powerDetail/powerDetail'\r\n\t\t\t// \t\t\t})\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 路线规划\r\n\t\t\topenMap: function(event) {\r\n\t\t\t\t// let index = event.currentTarget.dataset.index;\r\n\t\t\t\t// let data = this.data.listItem[index];\r\n\t\t\t\t// uni.openLocation({\r\n\t\t\t\t// \tlatitude: 30.498384,\r\n\t\t\t\t// \tlongitude: 114.447327,\r\n\t\t\t\t// \tname: '湖北省武汉市江岸区解放大道2538号',\r\n\t\t\t\t// \tscale: 15\r\n\t\t\t\t// })\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', //返回可以用于uni.openLocation的经纬度\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconst latitude = res.latitude;\r\n\t\t\t\t\t\tconst longitude = res.longitude;\r\n\t\t\t\t\t\tuni.openLocation({\r\n\t\t\t\t\t\t\tlatitude: 30.498384,\r\n\t\t\t\t\t\t\tlongitude: 114.447327,\r\n\t\t\t\t\t\t\tname: '湖北省武汉市江岸区解放大道2538号',\r\n\t\t\t\t\t\t\tscale: 15,\r\n\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\tconsole.log('success');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpathPlanning(e) {\r\n\t\t\t\tlet self = this\r\n\t\t\t\t// 获取当前位置\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', // 返回可以用于wx.openLocation的经纬度\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tself.latFrom = res.latitude;\r\n\t\t\t\t\t\tself.lngFrom = res.longitude;\r\n\t\t\t\t\t\tself.latitude = res.latitude\r\n\t\t\t\t\t\tself.longitude = res.longitude\r\n\t\t\t\t\t\t//导航\r\n\t\t\t\t\t\tqqmapsdk.direction({\r\n\t\t\t\t\t\t\tmode: 'driving', //可选值：'driving'（驾车）、'walking'（步行）、'bicycling'（骑行），不填默认：'driving',可不填\r\n\t\t\t\t\t\t\t//from参数不填默认当前地址\r\n\t\t\t\t\t\t\tfrom: res.latitude + ',' + res.longitude,\r\n\t\t\t\t\t\t\tto: '30.498384,114.447327',\r\n\t\t\t\t\t\t\tsuccess: function(ret) {\r\n\t\t\t\t\t\t\t\tconsole.log(ret);\r\n\t\t\t\t\t\t\t\tlet coors = ret.result.routes[0].polyline,\r\n\t\t\t\t\t\t\t\t\tpl = [];\r\n\t\t\t\t\t\t\t\t//坐标解压（返回的点串坐标，通过前向差分进行压缩）\r\n\t\t\t\t\t\t\t\tlet kr = 1000000;\r\n\t\t\t\t\t\t\t\tfor (let i = 2; i < coors.length; i++) {\r\n\t\t\t\t\t\t\t\t\tcoors[i] = Number(coors[i - 2]) + Number(coors[i]) / kr;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//将解压后的坐标放入点串数组pl中\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < coors.length; i += 2) {\r\n\t\t\t\t\t\t\t\t\tpl.push({\r\n\t\t\t\t\t\t\t\t\t\tlatitude: coors[i],\r\n\t\t\t\t\t\t\t\t\t\tlongitude: coors[i + 1]\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// console.log(pl)\r\n\t\t\t\t\t\t\t\tlet distance = self.getDistance(res.latitude, res.longitude, 30.498384, 114.447327)\r\n\t\t\t\t\t\t\t\t//设置polyline属性，将路线显示出来,将解压坐标第一个数据作为起点\r\n\t\t\t\t\t\t\t\tself.latitude = (res.latitude + Number(30.498384)) / 2;\r\n\t\t\t\t\t\t\t\tself.longitude = (res.longitude + Number(114.447327)) / 2;\r\n\t\t\t\t\t\t\t\tself.markers = [{\r\n\t\t\t\t\t\t\t\t\t\t'longitude': res.longitude,\r\n\t\t\t\t\t\t\t\t\t\t'latitude': res.latitude,\r\n\t\t\t\t\t\t\t\t\t\t'id': 1,\r\n\t\t\t\t\t\t\t\t\t\t'title': '起点',\r\n\t\t\t\t\t\t\t\t\t\t\"iconPath\": \"../../static/img/dibiao_icon3x.png\",\r\n\t\t\t\t\t\t\t\t\t\t\"width\": 30,\r\n\t\t\t\t\t\t\t\t\t\t\"height\": 30\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'longitude': 114.447327,\r\n\t\t\t\t\t\t\t\t\t\t'latitude': 30.498384,\r\n\t\t\t\t\t\t\t\t\t\t'id': 2,\r\n\t\t\t\t\t\t\t\t\t\t'title': '终点',\r\n\t\t\t\t\t\t\t\t\t\t\"iconPath\": \"../../static/img/dibiao_icon3x.png\",\r\n\t\t\t\t\t\t\t\t\t\t\"width\": 30,\r\n\t\t\t\t\t\t\t\t\t\t\"height\": 30\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\tself.polyline = [{\r\n\t\t\t\t\t\t\t\t\tpoints: pl,\r\n\t\t\t\t\t\t\t\t\tcolor: '#4FB773',\r\n\t\t\t\t\t\t\t\t\twidth: 4\r\n\t\t\t\t\t\t\t\t}];\r\n\t\t\t\t\t\t\t\tself.latitudeFinal = self.markers[0].latitude\r\n\t\t\t\t\t\t\t\tself.longitudeFinal = self.markers[0].longitude\r\n\t\t\t\t\t\t\t\tdistance = ret.result.routes[0].distance;\r\n\t\t\t\t\t\t\t\tself.scale = utlis.countZoom(distance);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function(error) {\r\n\t\t\t\t\t\t\t\tutlis.warning(error.message)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetDistance: function(lat1, lng1, lat2, lng2) {\r\n\t\t\t\tlat1 = lat1 || 0;\r\n\t\t\t\tlng1 = lng1 || 0;\r\n\t\t\t\tlat2 = lat2 || 0;\r\n\t\t\t\tlng2 = lng2 || 0;\r\n\r\n\t\t\t\tvar rad1 = lat1 * Math.PI / 180.0;\r\n\t\t\t\tvar rad2 = lat2 * Math.PI / 180.0;\r\n\t\t\t\tvar a = rad1 - rad2;\r\n\t\t\t\tvar b = lng1 * Math.PI / 180.0 - lng2 * Math.PI / 180.0;\r\n\t\t\t\tvar r = 6378137;\r\n\t\t\t\tvar distance = r * 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(rad1) * Math.cos(rad2) *\r\n\t\t\t\t\tMath\r\n\t\t\t\t\t.pow(\r\n\t\t\t\t\t\tMath.sin(b / 2), 2)));\r\n\t\t\t\tlet dista = (distance / 1000).toFixed(2);\r\n\t\t\t\treturn dista;\r\n\t\t\t\tconsole.log(lat1, lng1, lat2, lng2)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 标示点移动触发\r\n\t\t\t */\r\n\t\t\tregionchange(e) {},\r\n\r\n\t\t\t/**\r\n\t\t\t * 点击标识点触发\r\n\t\t\t */\r\n\t\t\tmarkertap(e) {},\r\n\r\n\t\t\t/**\r\n\t\t\t * control控件点击时间\r\n\t\t\t */\r\n\t\t\tcontroltap(e) {\r\n\t\t\t\tthis.moveToLocation()\r\n\t\t\t},\r\n\t\t\t// 定位\r\n\t\t\tGlobal(lat, lng) {\r\n\t\t\t\tthis.longitude = lng;\r\n\t\t\t\tthis.latitude = lat\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取医院标识\r\n\t\t\t */\r\n\t\t\tgetHospitalMarkers() {\r\n\t\t\t\tlet markers = [];\r\n\t\t\t\tlet circles = []\r\n\t\t\t\tfor (let item of this.agencyList) {\r\n\t\t\t\t\tlet marker = this.createMarker(item);\r\n\t\t\t\t\tlet circle = this.createCircle(item);\r\n\r\n\t\t\t\t\tmarkers.push(marker)\r\n\t\t\t\t\tcircles.push(circle)\r\n\t\t\t\t}\r\n\t\t\t\tthis.markers = markers;\r\n\t\t\t\tthis.circles = circles;\r\n\t\t\t\t// return markers;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 移动到自己位置\r\n\t\t\t */\r\n\t\t\tmoveToLocation: function() {\r\n\t\t\t\tlet mpCtx = wx.createMapContext(\"map\");\r\n\t\t\t\tmpCtx.moveToLocation();\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 还有地图标识，可以在name上面动手\r\n\t\t\t */\r\n\t\t\tcreateMarker(point) {\r\n\t\t\t\tconsole.log(point)\r\n\t\t\t\t// let latitude =parseFloat( point.latitude);\r\n\t\t\t\t// let longitude = parseFloat(point.longitude);\r\n\t\t\t\tlet latitude = parseFloat(point.lat);\r\n\t\t\t\tlet longitude = parseFloat(point.lng);\r\n\t\t\t\tlet content = '<h2>' + point.name + '</h2>';\r\n\t\t\t\tlet marker = [{\r\n\t\t\t\t\t\t'longitude': 114.447327,\r\n\t\t\t\t\t\t'latitude': 30.498384,\r\n\t\t\t\t\t\t'id': 2,\r\n\t\t\t\t\t\t'title': '终点',\r\n\t\t\t\t\t\t\"iconPath\": \"../../static/img/dibiao_icon3x.png\",\r\n\t\t\t\t\t\t\"width\": 30,\r\n\t\t\t\t\t\t\"height\": 30,\r\n\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\twidth: 100,\r\n\t\t\t\t\t\t\tcontent: 'qqqqq',\r\n\t\t\t\t\t\t\tfontize: 16,\r\n\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\tanchorX: 20,\r\n\t\t\t\t\t\t\tanchorY: -30,\r\n\t\t\t\t\t\t\tbgColor: \"#ffffff\",\r\n\t\t\t\t\t\t\tcolor: \"#333\",\r\n\t\t\t\t\t\t\tpadding: 10,\r\n\t\t\t\t\t\t\tdisplay: \"ALWAYS\",\r\n\t\t\t\t\t\t\tborderRadius: 5,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// iconPath: \"https://wx.weibeicc.com/img/maploge.svg\",\r\n\t\t\t\t\t\ticonPath: \"../../static/img/maploge.svg\",\r\n\t\t\t\t\t\tid: point.id || 0,\r\n\t\t\t\t\t\tname: point.name || '',\r\n\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\twidth: 30,\r\n\t\t\t\t\t\theight: 40,\r\n\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\twidth: 100,\r\n\t\t\t\t\t\t\tcontent: 'qqqqq',\r\n\t\t\t\t\t\t\tfontize: 16,\r\n\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\tanchorX: 20,\r\n\t\t\t\t\t\t\tanchorY: -30,\r\n\t\t\t\t\t\t\tbgColor: \"#ffffff\",\r\n\t\t\t\t\t\t\tcolor: \"#333\",\r\n\t\t\t\t\t\t\tpadding: 10,\r\n\t\t\t\t\t\t\tdisplay: \"ALWAYS\",\r\n\t\t\t\t\t\t\tborderRadius: 5,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\treturn marker;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 还有地图标识，可以在name上面动手\r\n\t\t\t */\r\n\t\t\tcreateCircle(point) {\r\n\t\t\t\t// latitude 纬度 Number 是 浮点数，范围 -90 ~ 90\r\n\t\t\t\t// longitude 经度 Number 是 浮点数，范围 -180 ~ 180\r\n\t\t\t\t// color 描边的颜色 String 否 8位十六进制表示，后两位表示alpha值，如：#000000AA\r\n\t\t\t\t// fillColor 填充颜色 String 否 8位十六进制表示，后两位表示alpha值，如：#000000AA\r\n\t\t\t\t// radius 半径 Number 是 \r\n\t\t\t\t// strokeWidth 描边的宽度 Number 否\r\n\t\t\t\t// let latitude =parseFloat( point.latitude);\r\n\t\t\t\t// let longitude = parseFloat(point.longitude);\r\n\t\t\t\tlet latitude = parseFloat(point.lat);\r\n\t\t\t\tlet longitude = parseFloat(point.lng);\r\n\r\n\t\t\t\tlet circle = {\r\n\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\tfillColor: '#333',\r\n\t\t\t\t\tradius: 50,\r\n\t\t\t\t};\r\n\t\t\t\treturn circle;\r\n\t\t\t},\r\n\r\n\r\n\t\t\tgetRegeo(e) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '获取信息中'\r\n\t\t\t\t});\r\n\t\t\t\tlet address = [];\r\n\t\t\t\tthis.amapPlugin.getRegeo({\r\n\t\t\t\t\tsuccess: (data) => {\r\n\t\t\t\t\t\tthis.addressName = data[0].name;\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log('省' + data[0].regeocodeData.addressComponent.province)\r\n\t\t\t\t\t\tconsole.log('市' + data[0].regeocodeData.addressComponent.city)\r\n\t\t\t\t\t\taddress.push(data[0].regeocodeData.addressComponent.province);\r\n\t\t\t\t\t\tif (data[0].regeocodeData.addressComponent.city.length != 0) {\r\n\t\t\t\t\t\t\taddress.push(data[0].regeocodeData.addressComponent.city);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 计算距离\r\n\t\t\t\t\t\t// let locationArr = [];\r\n\t\t\t\t\t\t// data.forEach((v, i) => {\r\n\t\t\t\t\t\t// \t// getDistance(latFrom, lngFrom, latTo, lngTo)\r\n\t\t\t\t\t\t// \t// locationArr.push(this.getDistance(this.latFrom, this.lngFrom, v.lat, v.lng));\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t// this.distanceArr = locationArr;\r\n\t\t\t\t\t\t// address[1].join(\"\")\r\n\t\t\t\t\t\tconsole.log('数组')\r\n\t\t\t\t\t\tconsole.log(address)\r\n\t\t\t\t\t\tthis.regionda = address; //获取列表参数\r\n\t\t\t\t\t\tthis.get_agency_list()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.errCode == '0' || res.errCode == 0) {\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 新版获取经销商\r\n\t\t\tget_agency_list() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet url = '/wx/network/get_agency_list';\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t// param: self.region\r\n\t\t\t\t\tparam: self.regionda\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log('参数' + self.regionda)\r\n\t\t\t\tutlis.http('POST', url, data, function(res) {\r\n\t\t\t\t\tif (res.errno == 200) {\r\n\t\t\t\t\t\t// self.dealerObj = res.result.records;\r\n\t\t\t\t\t\t// self.dealerObj = res.data.agency;\r\n\t\t\t\t\t\tself.agencyList = res.data.agency;\r\n\t\t\t\t\t\tself.dealer = []\r\n\t\t\t\t\t\tfor (let i of res.data.agency) {\r\n\t\t\t\t\t\t\tself.dealer.push(i.name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.getHospitalMarkers()\r\n\t\t\t\t\t\tlet disArr = [];\r\n\t\t\t\t\t\tself.agencyList.forEach((v, i) => {\r\n\t\t\t\t\t\t\tdisArr.push(self.getDistance(self.latitude, self.longitude, v.lat, v.lng));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tself.distanceArr = disArr;\r\n\t\t\t\t\t\t// self.markers=self.getHospitalMarkers();\r\n\t\t\t\t\t\t// self.circles=self.getHospitalMarkers();\r\n\t\t\t\t\t\t// self.chooseDealer = self.dealer[self.selectDealer]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tutlis.warning(res.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.naviDetail {\r\n\t\tposition: fixed;\r\n\t\tbottom: 54rpx;\r\n\t\tleft: 45rpx;\r\n\t\twidth: 660rpx;\r\n\t\theight: 200rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbackground: #FFFFFF;\r\n\t}\r\n\r\n\t.naviDetail_title {\r\n\t\tfont-size: 34rpx;\r\n\t\tposition: absolute;\r\n\t\tleft: 48rpx;\r\n\t\ttop: 46rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.naviDetail_word {\r\n\t\tfont-size: 28rpx;\r\n\t\tposition: absolute;\r\n\t\tleft: 48rpx;\r\n\t\tbottom: 46rpx;\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t.naviDetail_img {\r\n\t\twidth: 140rpx;\r\n\t\theight: 140rpx;\r\n\t\tposition: fixed;\r\n\t\tbottom: 180rpx;\r\n\t\tright: 82rpx;\r\n\t}\r\n\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: #F3F3F3;\r\n\t\theight: 100vh;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t#myMap {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #eee;\r\n\t}\r\n</style>\r\n","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./navi.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./navi.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1606977289274\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}